resources:
  - configuration
  - cluster-deployments
  - templates
  - credentials
  - multiclusterservices
patches:

  ### AWS ###
  # Cluster aws-managed-cluster-1
  - path: templates/clusters/aws/custom-aws-standalone-cp-0-0-1/cluster-deployment-patch.yaml
    target:
      kind: ClusterDeployment
      name: aws-managed-cluster-1
  - path: credentials/aws/aws-cloud-1/cluster-deployment-patch.yaml
    target:
      kind: ClusterDeployment
      name: aws-managed-cluster-1
  - path: templates/services/custom-ingress-nginx-4-11-0/service-spec-patch.yaml
    target:
      kind: ClusterDeployment
      name: aws-managed-cluster-1  
  
  # Cluster aws-managed-cluster-2
  - path: templates/services/custom-ingress-nginx-4-11-0/service-spec-patch.yaml
    target:
      kind: ClusterDeployment
      name: aws-managed-cluster-2
  - path: templates/clusters/aws/custom-aws-standalone-cp-0-0-1/cluster-deployment-patch.yaml
    target:
      kind: ClusterDeployment
      name: aws-managed-cluster-2
  - path: credentials/aws/aws-cloud-2/cluster-deployment-patch.yaml
    target:
      kind: ClusterDeployment
      name: aws-managed-cluster-2

  ### Azure ###
  # Cluster azure-managed-cluster-1
  - path: templates/clusters/azure/custom-azure-standalone-cp-0-0-1/cluster-deployment-patch.yaml
    target:
      kind: ClusterDeployment
      name: azure-managed-cluster-1
  - path: credentials/azure/azure-cloud-1/cluster-deployment-patch.yaml
    target:
      kind: ClusterDeployment
      name: azure-managed-cluster-1

replacements:
  ### Azure ###
  # Cluster azure-managed-cluster-1
  - source:
      kind: AzureClusterIdentity
      name: azure-cluster-identity-cloud-1
      fieldPath: metadata.namespace
    targets:
      - select:
          kind: ClusterDeployment
          name: azure-managed-cluster-1
        fieldPaths:
          - spec.config.clusterIdentity.namespace
